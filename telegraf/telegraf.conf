[agent]
  interval = "2s"
  metric_buffer_limit = 20000
  flush_interval = "4s"

[[outputs.influxdb]]
  urls = ["http://influxdb:8086"]
  database = "metrics" # required
  retention_policy = "autogen"
  username = "influxdb"
  password = "rewtrewt"

# debugging
#[[outputs.file]]
#   files = ["stdout"]

[[inputs.haproxy]]
  servers = ["http://loadbalancer:9001"]

# autogenerated now
#[[inputs.docker]]
#  endpoint = "tcp://stream50.local:2375"
#  timeout = "10s"

[[inputs.mongodb]]
  servers = ["mongodb://mongodb:27017"]

[[inputs.redis]]
  servers = ["tcp://redis:6379"]
  name_override = "redis"

[[inputs.postgresql]]
  address = "host=postgresql user=clsi password=clsi sslmode=disable"

[[inputs.statsd]]
  service_address = ":8125"
  # https://github.com/influxdata/telegraf/blob/master/docs/DATA_FORMATS_INPUT.md#graphite
  templates = [
      "loadgenerator.* measurement.field*",
      "measurement.container_id.field*"
  ]
  allowed_pending_messages = 10000
  delete_gauges = false
  delete_counters = false
  delete_sets = true
  delete_timings = true
  percentiles = [90]
